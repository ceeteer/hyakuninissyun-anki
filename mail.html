<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>百人一瞬暗記 </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 既存の共通スタイルを流用 */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* モダンなフォント */
            background: #e9eef2; /* 少し明るい背景色 */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            padding-top: 80px; /* ヘッダーの高さに合わせて調整 */
            overflow-x: hidden; /* 水平方向のスクロールバーを非表示にする */
        }

        .hero-left, .hero-right {
            position: fixed; /* ヘッダーとフッターの間で固定 */
            top: 77px; /* ヘッダーの高さに合わせる */
            bottom: 0px; /* フッターの高さ（例：53px）に合わせて調整 */
            width: 780px; /* ヒーロー画像の幅に合わせて調整 */
            background-image: url('images/tatami.jpeg'); /* ← ここが正しい記述です */
            background-repeat: repeat; /* 縦方向に繰り返す */
            z-index: -1; /* コンテンツより背面に配置 */
            pointer-events: none; /* クリックイベントなどを透過 */
        }

        .hero-left {
            left: 0;
        }

        .hero-right {
            right: 0;
        }

        /* --- ヘッダーのスタイル --- */
        header {
            background: #90EE90;
            color: white;
            width: 100%;
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        /* ヘッダーアイコンのスタイル */
        .header-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            vertical-align: middle;
        }

        header h1 {
            margin: 0;
            font-size: 1.8rem;
            font-family: 'Noto Serif JP', serif;
            flex-grow: 1;
            text-align: center;
        }

        /* ヘッダーの右側のダミーdiv（レイアウトバランス用） */
        header .header-right-spacer {
            width: 48px;
            height: 1px;
        }

        /* --- サイドバースタイルの追加 --- */
        .sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1001;
            top: 0;
            left: 0;
            background-color: #90EE90;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.3);
        }

        .sidebar.active {
            width: 280px; /* 少し幅を広げる */
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar ul li a {
            padding: 15px 25px;
            text-decoration: none;
            font-size: 1.1rem;
            color: #818181;
            display: block;
            transition: 0.3s;
        }

        .sidebar ul li a:hover {
            color: #f1f1f1;
            background-color: #555;
        }

        /* --- サイドバー閉じるボタン（サイドバー内部）のスタイル --- */
        .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
            color: #818181;
            text-decoration: none;
            padding: 8px 0;
        }

        .closebtn:hover {
            color: #f1f1f1;
        }

        /* --- ハンバーガーメニューボタンのスタイル --- */
        .openbtn {
            font-size: 30px;
            cursor: pointer;
            background-color: transparent;
            color: white;
            padding: 0;
            border: none;
            position: absolute; /* headerに対して絶対配置 */
            left: 1rem; /* 左端から1remの距離 */
            top: 50%;
            transform: translateY(-50%);
        }

        .openbtn:hover {
            color: #f1f1f1;
        }
        
        /* オーバーレイ */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* --- 新しいお問い合わせフォームのスタイル --- */
        .contact-container {
            background: linear-gradient(145deg, #ffffff, #f0f0f0); /* グラデーション背景 */
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            max-width: 600px; /* フォームの幅を少し狭める */
            width: 90%;
            text-align: left;
            margin-top: 120px; /* ヘッダーの高さと余白を考慮 */
            margin-bottom: 2rem;
            line-height: 1.6;
            color: #333;
            border: 1px solid #ddd;
        }

        .contact-container h2 {
            color: #2c3e50;
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #3498db;
            padding-bottom: 0.8rem;
            text-align: center;
        }

        .contact-form label {
            display: block; /* ラベルをブロック要素にして改行 */
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            font-size: 1.05rem;
        }

        .contact-form input[type="text"],
        .contact-form input[type="email"],
        .contact-form textarea {
            width: calc(100% - 20px); /* paddingを考慮 */
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1.0rem;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .contact-form input[type="text"]:focus,
        .contact-form input[type="email"]:focus,
        .contact-form textarea:focus {
            border-color: #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.4);
            outline: none; /* フォーカス時のデフォルトのアウトラインを削除 */
        }

        .contact-form textarea {
            resize: vertical; /* 垂直方向にのみリサイズ可能にする */
            min-height: 120px;
        }

        .contact-form .required::after {
            content: " *";
            color: #e74c3c; /* 赤色 */
            font-size: 0.9em;
            vertical-align: top;
        }

        .contact-form button {
            background-color: #4CAF50; /* 緑色 */
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .contact-form button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        .contact-form button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .error-message {
            color: #e74c3c;
            font-size: 0.9em;
            margin-top: -15px; /* inputとの間隔を詰める */
            margin-bottom: 10px;
            display: block; /* エラーメッセージをブロック要素にする */
        }
        
        /* フッターのスタイル */
        footer {
            margin-top: auto;
            width: 100%;
            text-align: center;
            padding: 1.2rem 0; /* パディングを増やす */
            background: #90EE90;
            color: #e9eef2; /* 明るい色 */
            font-size: 0.95rem;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1); /* 上向きの影 */
        }

        /* モバイル対応 */
        @media (max-width: 768px) {
            .contact-container {
                margin-top: 100px;
                padding: 1.5rem;
            }

            .contact-container h2 {
                font-size: 1.8rem;
            }

            .contact-form input[type="text"],
            .contact-form input[type="email"],
            .contact-form textarea {
                width: calc(100% - 20px);
            }

            .contact-form button {
                padding: 12px 20px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="hero-left"></div>
    <div class="hero-right"></div>
    <header>
        <button class="openbtn" onclick="openNav()">&#9776;</button>
        <h1>
            <img src="images/karuta.png" alt="" class="header-icon">
            百人一瞬暗記
        </h1>
        <div class="header-right-spacer"></div> </header>

    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <ul>
            <li><a href="start.html" onclick="closeNav()">ホーム</a></li>
            <li><a href="list.html" onclick="closeNav()">句一覧</a></li>
            <li><a href="weak-poems.html" onclick="closeNav()">苦手句リスト</a></li>
            <li><a href="about.html" onclick="closeNav()">このアプリについて</a></li>
            <li><a href="privacy.html" onclick="closeNav()">プライバシーポリシー</a></li>
            <li><a href="mail.html" onclick="closeNav()">お問い合わせ</a></li>
        </ul>
    </div>

    <div id="sidebarOverlay" class="overlay" onclick="closeNav()"></div>

    <div class="contact-container">
        <h2>お問い合わせ</h2>
        <p>ご意見、ご感想、不具合報告など、お気軽にお問い合わせください。</p>
        <form id="contactForm" class="contact-form" action="#" method="POST">
            <label for="name" class="required">お名前</label>
            <input type="text" id="name" name="name" placeholder="例：山田 太郎" required aria-required="true">
            <span id="nameError" class="error-message"></span>

            <label for="email" class="required">メールアドレス</label>
            <input type="email" id="email" name="email" placeholder="例：your.email@example.com" required aria-required="true">
            <span id="emailError" class="error-message"></span>

            <label for="subject">件名</label>
            <input type="text" id="subject" name="subject" placeholder="例：アプリへのご意見">

            <label for="message" class="required">お問い合わせ内容</label>
            <textarea id="message" name="message" placeholder="具体的な内容をご記入ください" rows="5" required aria-required="true"></textarea>
            <span id="messageError" class="error-message"></span>

            <button type="submit" id="submitButton" disabled>送信</button>
        </form>
    </div>

    <footer>
        &copy; <span id="currentYear"></span> hyakuninnissyunanki
    </footer>

    <script>
        // サイドバー関連関数（既存のものを流用）
        const sidebar = document.getElementById("mySidebar");
        const openSidebarBtn = document.querySelector(".openbtn");
        const closeSidebarBtn = document.querySelector(".closebtn");
        const overlay = document.getElementById("sidebarOverlay");
        const sidebarLinks = sidebar.querySelectorAll('ul li a');
        const header = document.querySelector('header');

        function setBodyPaddingTop() {
            const headerHeight = header.offsetHeight;
            document.body.style.paddingTop = `${headerHeight}px`;
            sidebar.style.paddingTop = `${headerHeight}px`;
        }

        function openNav() {
            sidebar.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // 背景スクロールを禁止
            openSidebarBtn.setAttribute('aria-expanded', 'true');
        }

        function closeNav() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = ''; // 背景スクロールを許可
            openSidebarBtn.setAttribute('aria-expanded', 'false');
        }

        // debounce関数（リサイズイベントなどでパフォーマンス向上）
        function debounce(func, delay) {
            let timeout;
            return function(...args) {
                const context = this;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), delay);
            };
        }

        // 初期化処理
        document.addEventListener("DOMContentLoaded", function() {
            setBodyPaddingTop(); // ヘッダーの高さに合わせてpadding-topを設定
            document.getElementById("currentYear").textContent = new Date().getFullYear(); // フッターの年を更新
        });

        window.addEventListener('resize', debounce(setBodyPaddingTop, 100)); // リサイズ時にもpadding-topを調整

        // サイドバー関連イベントリスナー
        openSidebarBtn.addEventListener('click', openNav);
        closeSidebarBtn.addEventListener('click', closeNav);
        overlay.addEventListener('click', closeNav);
        sidebarLinks.forEach(link => {
            link.addEventListener('click', closeNav);
        });

        // --- お問い合わせフォームの入力検証（フロントエンド） ---
        const contactForm = document.getElementById('contactForm');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const messageInput = document.getElementById('message');
        const submitButton = document.getElementById('submitButton');

        const nameError = document.getElementById('nameError');
        const emailError = document.getElementById('emailError');
        const messageError = document.getElementById('messageError');

        // 全ての入力フィールドを監視し、入力が変更されるたびに検証を行う
        [nameInput, emailInput, messageInput].forEach(input => {
            input.addEventListener('input', validateForm);
        });

        function validateForm() {
            let isNameValid = validateName();
            let isEmailValid = validateEmail();
            let isMessageValid = validateMessage();

            // 全ての必須項目が有効なら送信ボタンを有効化
            if (isNameValid && isEmailValid && isMessageValid) {
                submitButton.disabled = false;
            } else {
                submitButton.disabled = true;
            }
        }

        function validateName() {
            if (nameInput.value.trim() === '') {
                nameError.textContent = 'お名前は必須です。';
                return false;
            }
            nameError.textContent = '';
            return true;
        }

        function validateEmail() {
            const email = emailInput.value.trim();
            if (email === '') {
                emailError.textContent = 'メールアドレスは必須です。';
                return false;
            }
            // 簡単なメールアドレス形式の正規表現チェック
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                emailError.textContent = '有効なメールアドレスを入力してください。';
                return false;
            }
            emailError.textContent = '';
            return true;
        }

        function validateMessage() {
            if (messageInput.value.trim() === '') {
                messageError.textContent = 'お問い合わせ内容は必須です。';
                return false;
            }
            messageError.textContent = '';
            return true;
        }

        // フォーム送信時の処理（今回は実際の送信は行わず、メッセージ表示のみ）
        contactForm.addEventListener('submit', function(event) {
            event.preventDefault(); // デフォルトのフォーム送信をキャンセル

            // 最終チェック
            if (!validateName() || !validateEmail() || !validateMessage()) {
                alert('入力内容に誤りがあります。ご確認ください。');
                return;
            }

            // ここに実際の送信処理を記述します。
            // 例: Fetch APIを使ってサーバーにデータを送信
            // fetch('/api/contact', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify({
            //         name: nameInput.value,
            //         email: emailInput.value,
            //         subject: subjectInput.value, // subjectInputがHTMLに存在する場合
            //         message: messageInput.value
            //     })
            // })
            // .then(response => response.json())
            // .then(data => {
            //     alert('お問い合わせを送信しました。ありがとうございます！');
            //     contactForm.reset(); // フォームをリセット
            //     submitButton.disabled = true; // ボタンを無効化
            // })
            // .catch(error => {
            //     console.error('送信エラー:', error);
            //     alert('送信中にエラーが発生しました。お手数ですが、もう一度お試しください。');
            // });

            // **今回は、実際の送信は行わないため、成功メッセージを表示してフォームをリセットします。**
            alert('お問い合わせ内容を受け付けました。ありがとうございます！\n（※このフォームはテスト用のため、実際には送信されません。）');
            contactForm.reset(); // フォームをリセット
            submitButton.disabled = true; // ボタンを無効化

            // エラーメッセージもクリア
            nameError.textContent = '';
            emailError.textContent = '';
            messageError.textContent = '';
        });

        // ページロード時に一度フォームの検証を実行し、送信ボタンの状態を初期設定
        document.addEventListener('DOMContentLoaded', validateForm);
    </script>
</body>
</html>