<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>百人一瞬暗記 </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="hero-left"></div>
    <div class="hero-right"></div>
    <header>
        <button class="open-sidebar-btn" onclick="openNav()">&#9776;</button>
        <h1>
            <img src="karuta.png" alt="" class="header-icon">
            百人一瞬暗記
        </h1>
         <!-- 新規追加: ログイン・新規登録ボタンのコンテナ -->
        <div class="auth-buttons">
            <button onclick="handleLogin()">ログイン</button>
            <button onclick="handleRegister()">新規登録</button>
        </div>
             <div class="font-size-controls">
            <button id="font-size-small-btn">小</button>
            <button id="font-size-medium-btn" class="active">中</button>
            <button id="font-size-large-btn">大</button>
        </div>
        <div class="header-right-spacer"></div> </header>

    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <ul>
            <li><a href="start.html" onclick="closeNav()">ホーム</a></li>
            <li><a href="list.html" onclick="closeNav()">句一覧</a></li>
            <li><a href="weak-poems.html" onclick="closeNav()">苦手句リスト</a></li>
            <li><a href="about.html" onclick="closeNav()">このアプリについて</a></li>
            <li><a href="privacy.html" onclick="closeNav()">プライバシーポリシー</a></li>
            <li><a href="mail.html" onclick="closeNav()">お問い合わせ</a></li>
        </ul>
    </div>

    <div id="sidebarOverlay" class="overlay" onclick="closeNav()"></div>

    <div class="contact-container">
        <h2>お問い合わせ</h2>
        <p>ご意見、ご感想、不具合報告など、お気軽にお問い合わせください。</p>
        <form id="contactForm" class="contact-form" action="#" method="POST">
            <label for="name" class="required">お名前</label>
            <input type="text" id="name" name="name" placeholder="例：山田 太郎" required aria-required="true">
            <span id="nameError" class="error-message"></span>

            <label for="email" class="required">メールアドレス</label>
            <input type="email" id="email" name="email" placeholder="例：your.email@example.com" required aria-required="true">
            <span id="emailError" class="error-message"></span>

            <label for="subject">件名</label>
            <input type="text" id="subject" name="subject" placeholder="例：アプリへのご意見">

            <label for="message" class="required">お問い合わせ内容</label>
            <textarea id="message" name="message" placeholder="具体的な内容をご記入ください" rows="5" required aria-required="true"></textarea>
            <span id="messageError" class="error-message"></span>

            <button type="submit" id="submitButton" disabled>送信</button>
        </form>
    </div>

    <footer>
        &copy; <span id="currentYear"></span> hyakuninnissyunanki
    </footer>

    <script>
        // --- 文字サイズ変更機能 ---
        // html要素を取得
        const html = document.documentElement;
        const smallBtn = document.getElementById('font-size-small-btn');
        const mediumBtn = document.getElementById('font-size-medium-btn');
        const largeBtn = document.getElementById('font-size-large-btn');
        const sizeButtons = [smallBtn, mediumBtn, largeBtn];
        
        // 文字サイズを変更する関数
        function changeFontSize(size) {
            // html要素から既存のフォントサイズクラスをすべて削除
            html.classList.remove('font-size-small', 'font-size-medium', 'font-size-large');
            // 新しいフォントサイズクラスを追加
            html.classList.add(`font-size-${size}`);
            
            // 全てのボタンからactiveクラスを削除
            sizeButtons.forEach(btn => btn.classList.remove('active'));
            // 選択されたボタンにactiveクラスを追加
            document.getElementById(`font-size-${size}-btn`).classList.add('active');
        }
        
        // 各ボタンにイベントリスナーを追加
        smallBtn.addEventListener('click', () => changeFontSize('small'));
        mediumBtn.addEventListener('click', () => changeFontSize('medium'));
        largeBtn.addEventListener('click', () => changeFontSize('large'));
        
        // 初期設定：中サイズを適用
        changeFontSize('medium');
        
        // 現在の年を取得して表示するJavaScript
        document.getElementById("currentYear").textContent = new Date().getFullYear();
    
        // サイドバー関連関数（既存のものを流用）
        const sidebar = document.getElementById("mySidebar");
        const openSidebarBtn = document.querySelector(".openbtn");
        const closeSidebarBtn = document.querySelector(".closebtn");
        const overlay = document.getElementById("sidebarOverlay");
        const sidebarLinks = sidebar.querySelectorAll('ul li a');
        const header = document.querySelector('header');

        function setBodyPaddingTop() {
            const headerHeight = header.offsetHeight;
            document.body.style.paddingTop = `${headerHeight}px`;
            sidebar.style.paddingTop = `${headerHeight}px`;
        }

        function openNav() {
            sidebar.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // 背景スクロールを禁止
            openSidebarBtn.setAttribute('aria-expanded', 'true');
        }

        function closeNav() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = ''; // 背景スクロールを許可
            openSidebarBtn.setAttribute('aria-expanded', 'false');
        }

        // debounce関数（リサイズイベントなどでパフォーマンス向上）
        function debounce(func, delay) {
            let timeout;
            return function(...args) {
                const context = this;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), delay);
            };
        }

        // 初期化処理
        document.addEventListener("DOMContentLoaded", function() {
            setBodyPaddingTop(); // ヘッダーの高さに合わせてpadding-topを設定
            document.getElementById("currentYear").textContent = new Date().getFullYear(); // フッターの年を更新
        });

        window.addEventListener('resize', debounce(setBodyPaddingTop, 100)); // リサイズ時にもpadding-topを調整

        // サイドバー関連イベントリスナー
        openSidebarBtn.addEventListener('click', openNav);
        closeSidebarBtn.addEventListener('click', closeNav);
        overlay.addEventListener('click', closeNav);
        sidebarLinks.forEach(link => {
            link.addEventListener('click', closeNav);
        });

        // --- お問い合わせフォームの入力検証（フロントエンド） ---
        const contactForm = document.getElementById('contactForm');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const messageInput = document.getElementById('message');
        const submitButton = document.getElementById('submitButton');

        const nameError = document.getElementById('nameError');
        const emailError = document.getElementById('emailError');
        const messageError = document.getElementById('messageError');

        // 全ての入力フィールドを監視し、入力が変更されるたびに検証を行う
        [nameInput, emailInput, messageInput].forEach(input => {
            input.addEventListener('input', validateForm);
        });

        function validateForm() {
            let isNameValid = validateName();
            let isEmailValid = validateEmail();
            let isMessageValid = validateMessage();

            // 全ての必須項目が有効なら送信ボタンを有効化
            if (isNameValid && isEmailValid && isMessageValid) {
                submitButton.disabled = false;
            } else {
                submitButton.disabled = true;
            }
        }

        function validateName() {
            if (nameInput.value.trim() === '') {
                nameError.textContent = 'お名前は必須です。';
                return false;
            }
            nameError.textContent = '';
            return true;
        }

        function validateEmail() {
            const email = emailInput.value.trim();
            if (email === '') {
                emailError.textContent = 'メールアドレスは必須です。';
                return false;
            }
            // 簡単なメールアドレス形式の正規表現チェック
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                emailError.textContent = '有効なメールアドレスを入力してください。';
                return false;
            }
            emailError.textContent = '';
            return true;
        }

        function validateMessage() {
            if (messageInput.value.trim() === '') {
                messageError.textContent = 'お問い合わせ内容は必須です。';
                return false;
            }
            messageError.textContent = '';
            return true;
        }

        // フォーム送信時の処理（今回は実際の送信は行わず、メッセージ表示のみ）
        contactForm.addEventListener('submit', function(event) {
            event.preventDefault(); // デフォルトのフォーム送信をキャンセル

            // 最終チェック
            if (!validateName() || !validateEmail() || !validateMessage()) {
                alert('入力内容に誤りがあります。ご確認ください。');
                return;
            }

            // ここに実際の送信処理を記述します。
            // 例: Fetch APIを使ってサーバーにデータを送信
            // fetch('/api/contact', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify({
            //         name: nameInput.value,
            //         email: emailInput.value,
            //         subject: subjectInput.value, // subjectInputがHTMLに存在する場合
            //         message: messageInput.value
            //     })
            // })
            // .then(response => response.json())
            // .then(data => {
            //     alert('お問い合わせを送信しました。ありがとうございます！');
            //     contactForm.reset(); // フォームをリセット
            //     submitButton.disabled = true; // ボタンを無効化
            // })
            // .catch(error => {
            //     console.error('送信エラー:', error);
            //     alert('送信中にエラーが発生しました。お手数ですが、もう一度お試しください。');
            // });

            // **今回は、実際の送信は行わないため、成功メッセージを表示してフォームをリセットします。**
            alert('お問い合わせ内容を受け付けました。ありがとうございます！\n（※このフォームはテスト用のため、実際には送信されません。）');
            contactForm.reset(); // フォームをリセット
            submitButton.disabled = true; // ボタンを無効化

            // エラーメッセージもクリア
            nameError.textContent = '';
            emailError.textContent = '';
            messageError.textContent = '';
        });

        // ページロード時に一度フォームの検証を実行し、送信ボタンの状態を初期設定
        document.addEventListener('DOMContentLoaded', validateForm);

         // --- 新規追加: ログイン・新規登録ボタンのダミー関数 ---
        // ログインボタンがクリックされたときに実行される関数
        function handleLogin() {
            console.log("ログインボタンがクリックされました。");
            // ここにPythonのログイン機能を呼び出す処理を記述します。
            // 現時点ではデザインのみなので、コンソールにメッセージを表示します。
        }

        // 新規登録ボタンがクリックされたときに実行される関数
        function handleRegister() {
            console.log("新規登録ボタンがクリックされました。");
            // ここにPythonの新規登録機能を呼び出す処理を記述します。
            // 現時点ではデザインのみなので、コンソールにメッセージを表示します。
        }
    </script>
</body>
</html>