<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>百人一瞬暗記 - 苦手句リスト</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
     <div class="hero-left"></div>
    <div class="hero-right"></div>
    <header>
        <button class="open-sidebar-btn" onclick="openSidebar()">☰</button>
 <h1 class="svg-title">
    <img src="karuta.png" alt="カルタのアイコン" class="header-icon">
    <svg viewBox="0 0 500 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">
        百人一瞬暗記
      </text>
    </svg>
  </h1>
             <!--新規登録、ログインボタンのコンテナ-->
  <div class="auth-buttons">
    <button onclick="handleLogin()">ログイン</button>
    <button onclick="handleRegister()">新規登録</button>
  </div>
  <div class="font-size-controls">
            <button id="font-size-small-btn">小</button>
            <button id="font-size-medium-btn" class="active">中</button>
            <button id="font-size-large-btn">大</button>
        </div>
  <div class="header-right-spacer"></div>
         <a href="https://www.karuta.or.jp/
" class="karuta-link-box">競技かるたへ興味のある方はこちらから</a>
<a href="https://youtu.be/uL_GVMQo_-Y?si=u-UV2HNQE3WzWG1Q/" class="rulu-link-box">ルール解説動画</a>
        
    </header>
    

    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
        <ul>
            <li><a href="start.html" onclick="closeNav()">ホーム</a></li>
            <li><a href="list.html" onclick="closeNav()">句一覧</a></li>
            <li><a href="weak-poems.html" onclick="closeNav()">苦手句リスト</a></li>
            <li><a href="about.html" onclick="closeNav()">このアプリについて</a></li>
            <li><a href="privacy.html" onclick="closeNav()">プライバシーポリシー</a></li>
            <li><a href="mail.html" onclick="closeNav()">お問い合わせ</a></li>
            <li><a href="keep.html" onclick="closeNav()">管理者情報</a></li>
        </ul>
    </div>

    <div id="sidebarOverlay" class="overlay" onclick="closeNav()"></div>

    <div id="weakPoemsSection" class="content-section">
        <h2>苦手句リスト</h2>
        <p></p>
        <div id="weakPoemsList" class="weak-poems-list"></div>
        <button id="clearWeakPoemsButton" class="quiz-button" style="margin-top: 1.5rem;">リストをクリア</button>
    </div>

    <footer>
        © <span id="currentYear"></span> hyakuninnissyunanki
    </footer>

    <script>

   
        // サイドバーを開く関数
        function openNav() {
            document.getElementById("mySidebar").style.width = "280px";
        }

        // サイドバーを閉じる関数
        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
        }
        
        // --- 文字サイズ変更機能 ---
        // html要素を取得
        const html = document.documentElement;
        const smallBtn = document.getElementById('font-size-small-btn');
        const mediumBtn = document.getElementById('font-size-medium-btn');
        const largeBtn = document.getElementById('font-size-large-btn');
        const sizeButtons = [smallBtn, mediumBtn, largeBtn];
        
        // 文字サイズを変更する関数
        function changeFontSize(size) {
            // html要素から既存のフォントサイズクラスをすべて削除
            html.classList.remove('font-size-small', 'font-size-medium', 'font-size-large');
            // 新しいフォントサイズクラスを追加
            html.classList.add(`font-size-${size}`);
            
            // 全てのボタンからactiveクラスを削除
            sizeButtons.forEach(btn => btn.classList.remove('active'));
            // 選択されたボタンにactiveクラスを追加
            document.getElementById(`font-size-${size}-btn`).classList.add('active');
        }
        
        // 各ボタンにイベントリスナーを追加
        smallBtn.addEventListener('click', () => changeFontSize('small'));
        mediumBtn.addEventListener('click', () => changeFontSize('medium'));
        largeBtn.addEventListener('click', () => changeFontSize('large'));
        
        // 初期設定：中サイズを適用
        changeFontSize('medium');
        
        // 現在の年を取得して表示するJavaScript
        document.getElementById("currentYear").textContent = new Date().getFullYear();
        // サイドバー関連関数（start.htmlと共通）
        const sidebar = document.getElementById("mySidebar");
        const openSidebarBtn = document.querySelector(".open-sidebar-btn");
        const closeSidebarBtn = document.querySelector(".closebtn");
        const overlay = document.getElementById("sidebarOverlay");
        const sidebarLinks = sidebar.querySelectorAll('ul li a');
        const header = document.querySelector('header');

        function setBodyPaddingTop() {
            const headerHeight = header.offsetHeight;
            document.body.style.paddingTop = `${headerHeight}px`;
            sidebar.style.paddingTop = `${headerHeight}px`;
        }

        function debounce(func, delay) {
            let timeout;
            return function(...args) {
                const context = this;
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(context, args), delay);
            };
        }

        function openNav() {
            sidebar.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            openSidebarBtn.setAttribute('aria-expanded', 'true');
        }

        function closeNav() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            openSidebarBtn.setAttribute('aria-expanded', 'false');
        }

        // 苦手句リストの表示
        function displayWeakPoems() {
            const weakPoemsList = document.getElementById('weakPoemsList');
            weakPoemsList.innerHTML = '';

            const weakPoems = JSON.parse(localStorage.getItem('weakPoems') || '[]');

            if (weakPoems.length === 0) {
                weakPoemsList.innerHTML = '<p class="no-poems">苦手句はありません。</p>';
                return;
            }

            weakPoems.forEach((poem, index) => {
                const poemDiv = document.createElement('div');
                poemDiv.className = 'weak-poem-item';
                poemDiv.innerHTML = `
                    <p>${poem.question}<br>${poem.answer}</p>
                    <button onclick="removeWeakPoem(${index})">削除</button>
                `;
                weakPoemsList.appendChild(poemDiv);
            });
        }

        // 苦手句の削除
        function removeWeakPoem(index) {
            let weakPoems = JSON.parse(localStorage.getItem('weakPoems') || '[]');
            weakPoems.splice(index, 1);
            localStorage.setItem('weakPoems', JSON.stringify(weakPoems));
            displayWeakPoems();
        }

        // 苦手句リストをクリア
        document.getElementById('clearWeakPoemsButton').onclick = function() {
            localStorage.removeItem('weakPoems');
            displayWeakPoems();
        };

        // 初期化
        document.addEventListener("DOMContentLoaded", function() {
            setBodyPaddingTop();
            displayWeakPoems();
            document.getElementById("currentYear").textContent = new Date().getFullYear();
        });

        window.addEventListener('resize', debounce(setBodyPaddingTop, 100));

        openSidebarBtn.addEventListener('click', openNav);
        closeSidebarBtn.addEventListener('click', closeNav);
        overlay.addEventListener('click', closeNav);
        sidebarLinks.forEach(link => {
            link.addEventListener('click', closeNav);
        });
        // --- 新規追加: ログイン・新規登録ボタンのダミー関数 ---
        // ログインボタンがクリックされたときに実行される関数
        function handleLogin() {
            console.log("ログインボタンがクリックされました。");
            // ここにPythonのログイン機能を呼び出す処理を記述します。
            // 現時点ではデザインのみなので、コンソールにメッセージを表示します。
        }

        // 新規登録ボタンがクリックされたときに実行される関数
        function handleRegister() {
            console.log("新規登録ボタンがクリックされました。");
            // ここにPythonの新規登録機能を呼び出す処理を記述します。
            // 現時点ではデザインのみなので、コンソールにメッセージを表示します。
        }
    </script>
</body>
</html>